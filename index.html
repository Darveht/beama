
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeMaa - Aprende Matemáticas</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Pantalla de Autenticación -->
    <div id="authScreen" class="screen">
        <div class="auth-container">
            <div class="auth-logo">
                <div class="mascot-face auth-mascot">🐻</div>
                <h1>BeMaa</h1>
                <p>Tu compañero matemático</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Iniciar Sesión</button>
                <button class="auth-tab" onclick="switchAuthTab('register')">Registrarse</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <div class="form-group">
                    <input type="email" id="loginEmail" placeholder="Correo electrónico" required>
                    <i class="fas fa-envelope form-icon"></i>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" placeholder="Contraseña" required>
                    <i class="fas fa-lock form-icon"></i>
                </div>
                <button class="auth-btn" onclick="loginUser()">
                    <i class="fas fa-sign-in-alt"></i>
                    Iniciar Sesión
                </button>
                <div class="auth-options">
                    <button class="google-btn" onclick="loginWithGoogle()">
                        <i class="fab fa-google"></i>
                        Continuar con Google
                    </button>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="auth-form">
                <div class="form-group">
                    <input type="text" id="registerName" placeholder="Nombre completo" required>
                    <i class="fas fa-user form-icon"></i>
                </div>
                <div class="form-group">
                    <input type="email" id="registerEmail" placeholder="Correo electrónico" required>
                    <i class="fas fa-envelope form-icon"></i>
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" placeholder="Contraseña (mín. 6 caracteres)" required>
                    <i class="fas fa-lock form-icon"></i>
                </div>
                <div class="form-group">
                    <input type="password" id="confirmPassword" placeholder="Confirmar contraseña" required>
                    <i class="fas fa-lock form-icon"></i>
                </div>
                <div class="age-selector">
                    <label>Edad:</label>
                    <select id="userAge">
                        <option value="">Selecciona tu edad</option>
                        <option value="kid">6-12 años</option>
                        <option value="teen">13-17 años</option>
                        <option value="adult">18+ años</option>
                    </select>
                </div>
                <button class="auth-btn" onclick="registerUser()">
                    <i class="fas fa-user-plus"></i>
                    Crear Cuenta
                </button>
                <div class="auth-options">
                    <button class="google-btn" onclick="loginWithGoogle()">
                        <i class="fab fa-google"></i>
                        Registrarse con Google
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pantalla Principal - Estilo Duolingo -->
    <div id="homeScreen" class="screen">
        <!-- Barra Superior -->
        <div class="duolingo-header">
            <div class="header-left">
                <div class="streak-counter">
                    <i class="fas fa-fire"></i>
                    <span id="streak">0</span>
                </div>
            </div>
            <div class="header-center">
                <div class="progress-section">
                    <div class="user-level">Nivel <span id="userLevel">1</span></div>
                    <div class="progress-bar-header">
                        <div class="progress-fill-header" style="width: 30%"></div>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="gems-counter">
                    <i class="fas fa-gem"></i>
                    <span id="gems">100</span>
                </div>
                <div class="lives-counter">
                    <i class="fas fa-heart"></i>
                    <span id="lives">5</span>
                </div>
            </div>
        </div>

        <!-- Contenido Principal -->
        <div class="duolingo-content">
            <!-- Mascota y Mensaje -->
            <div class="mascot-section">
                <div class="mascot-3d mascot-3d-inline" id="mascot3dHome">
                    <div class="bear-3d" id="bearHome">
                        <div class="bear-head">
                            <div class="bear-ears">
                                <div class="bear-ear left"></div>
                                <div class="bear-ear right"></div>
                            </div>
                            <div class="bear-face">
                                <div class="bear-eyes">
                                    <div class="bear-eye left">
                                        <div class="pupil"></div>
                                    </div>
                                    <div class="bear-eye right">
                                        <div class="pupil"></div>
                                    </div>
                                </div>
                                <div class="bear-nose"></div>
                                <div class="bear-mouth" id="bearMouthHome"></div>
                            </div>
                        </div>
                        <div class="bear-body">
                            <div class="bear-arms">
                                <div class="bear-arm left"></div>
                                <div class="bear-arm right"></div>
                            </div>
                            <div class="bear-belly"></div>
                        </div>
                    </div>
                </div>
                <div class="mascot-speech" id="mascotSpeech">¡Hola! Soy BeMaa, ¿listo para una aventura matemática?</div>
            </div>

            <!-- Lecciones Integradas -->
            <div class="lessons-path">
                <h2 class="section-title">Tu camino de aprendizaje</h2>
                <div class="lessons-grid" id="lessonsGrid">
                    <!-- Lecciones generadas dinámicamente -->
                </div>
            </div>
        </div>

        <!-- Barra de Navegación Inferior -->
        <div class="bottom-nav">
            <button class="nav-item active" onclick="showHome()">
                <i class="fas fa-home"></i>
                <span>Inicio</span>
            </button>
            <button class="nav-item" onclick="showLeaderboard()">
                <i class="fas fa-trophy"></i>
                <span>Ranking</span>
            </button>
            <button class="nav-item" onclick="showShop()">
                <i class="fas fa-store"></i>
                <span>Tienda</span>
            </button>
            <button class="nav-item" onclick="showProfile()">
                <i class="fas fa-user"></i>
                <span>Perfil</span>
            </button>
            <button class="nav-item" onclick="showSettings()">
                <i class="fas fa-cog"></i>
                <span>Ajustes</span>
            </button>
        </div>
    </div>

    <!-- Pantalla de juego -->
    <div id="gameScreen" class="screen">
        <div class="game-header">
            <button class="back-btn" onclick="showHome()">
                <i class="fas fa-times"></i>
            </button>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="lives-display">
                <span id="livesCount">5</span>
                <i class="fas fa-heart"></i>
            </div>
        </div>

        <div class="mascot-container">
            <div class="mascot" id="mascotGame">
                <div class="mascot-3d mascot-3d-inline">
                    <div class="bear-3d" id="bearGame">
                        <div class="bear-head">
                            <div class="bear-ears">
                                <div class="bear-ear left"></div>
                                <div class="bear-ear right"></div>
                            </div>
                            <div class="bear-face">
                                <div class="bear-eyes">
                                    <div class="bear-eye left">
                                        <div class="pupil"></div>
                                    </div>
                                    <div class="bear-eye right">
                                        <div class="pupil"></div>
                                    </div>
                                </div>
                                <div class="bear-nose"></div>
                                <div class="bear-mouth" id="bearMouthGame"></div>
                            </div>
                        </div>
                        <div class="bear-body">
                            <div class="bear-arms">
                                <div class="bear-arm left"></div>
                                <div class="bear-arm right"></div>
                            </div>
                            <div class="bear-belly"></div>
                        </div>
                    </div>
                </div>
                <div class="mascot-speech" id="mascotSpeechGame">¡Vamos a resolver este problema!</div>
            </div>
        </div>

        <div class="question-container">
            <div class="question-number">Pregunta <span id="questionNum">1</span> de <span id="totalQuestions">10</span></div>
            <div class="question-text" id="questionText"></div>
            <div class="question-image" id="questionImage"></div>
        </div>

        <div class="answers-container" id="answersContainer">
            <!-- Respuestas generadas dinámicamente -->
        </div>

        <div class="game-controls">
            <button class="help-btn" onclick="showCalculator()">
                <i class="fas fa-calculator"></i>
                Calculadora
            </button>
            <button class="hint-btn" onclick="showHint()">
                <i class="fas fa-lightbulb"></i>
                Pista
            </button>
            <button class="explain-btn" onclick="showExplanation()">
                <i class="fas fa-question-circle"></i>
                Explicar
            </button>
        </div>
    </div>

    <!-- Calculadora Virtual -->
    <div id="calculatorModal" class="modal">
        <div class="modal-content calculator">
            <div class="modal-header">
                <h3>Calculadora Virtual</h3>
                <button class="close-btn" onclick="closeCalculator()">&times;</button>
            </div>
            <div class="calculator-display" id="calcDisplay">0</div>
            <div class="calculator-buttons">
                <button onclick="clearCalc()">C</button>
                <button onclick="calcOperation('/')">/</button>
                <button onclick="calcOperation('*')">×</button>
                <button onclick="calcDelete()">←</button>
                <button onclick="calcNumber(7)">7</button>
                <button onclick="calcNumber(8)">8</button>
                <button onclick="calcNumber(9)">9</button>
                <button onclick="calcOperation('-')">-</button>
                <button onclick="calcNumber(4)">4</button>
                <button onclick="calcNumber(5)">5</button>
                <button onclick="calcNumber(6)">6</button>
                <button onclick="calcOperation('+')">+</button>
                <button onclick="calcNumber(1)">1</button>
                <button onclick="calcNumber(2)">2</button>
                <button onclick="calcNumber(3)">3</button>
                <button onclick="calcEquals()" class="calc-equals" rowspan="2">=</button>
                <button onclick="calcNumber(0)" class="calc-zero">0</button>
                <button onclick="calcDecimal()">.</button>
            </div>
            <div class="calc-steps" id="calcSteps">
                <h4>Pasos de la operación:</h4>
                <div id="stepsList"></div>
            </div>
        </div>
    </div>

    <!-- Pantalla de resultados -->
    <div id="resultsScreen" class="screen">
        <div class="results-container">
            <div class="mascot celebration" id="resultMascot">🐻</div>
            <h2 id="resultTitle">¡Excelente trabajo!</h2>
            <div class="score-display">
                <div class="score-item">
                    <span class="score-label">Puntuación:</span>
                    <span class="score-value" id="finalScore">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">Precisión:</span>
                    <span class="score-value" id="accuracy">0%</span>
                </div>
                <div class="score-item">
                    <span class="score-label">Gemas ganadas:</span>
                    <span class="score-value" id="gemsEarned">0</span>
                </div>
            </div>

            <div class="achievements" id="achievements">
                <!-- Logros ganados -->
            </div>

            <div class="result-actions">
                <button class="action-btn" onclick="startGame()">
                    <i class="fas fa-repeat"></i>
                    Repetir
                </button>
                <button class="action-btn" onclick="showHome()">
                    <i class="fas fa-home"></i>
                    Inicio
                </button>
            </div>
        </div>
    </div>

    <!-- Pantalla de Perfil -->
    <div id="profileScreen" class="screen">
        <div class="header">
            <button class="back-btn" onclick="showHome()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h2>Mi Perfil</h2>
            <button class="settings-btn" onclick="showSettings()">
                <i class="fas fa-cog"></i>
            </button>
        </div>

        <div class="profile-container">
            <div class="profile-section">
                <h3><i class="fas fa-user"></i> Información Personal</h3>
                <div class="profile-info">
                    <div class="info-item">
                        <label>Nombre:</label>
                        <input type="text" id="profileName" placeholder="Tu nombre">
                        <button class="edit-btn" onclick="editProfileName()">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                    <div class="info-item">
                        <label>Correo:</label>
                        <input type="email" id="profileEmail" placeholder="tu@email.com">
                        <button class="edit-btn" onclick="editProfileEmail()">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                    <div class="info-item">
                        <label>Edad:</label>
                        <select id="profileAge">
                            <option value="kid">6-12 años</option>
                            <option value="teen">13-17 años</option>
                            <option value="adult">18+ años</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3><i class="fas fa-chart-line"></i> Estadísticas</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">🔥</div>
                        <div class="stat-number" id="profileStreak">0</div>
                        <div class="stat-label">Racha</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">💎</div>
                        <div class="stat-number" id="profileGems">0</div>
                        <div class="stat-label">Gemas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🏆</div>
                        <div class="stat-number" id="profileLevel">1</div>
                        <div class="stat-label">Nivel</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">✅</div>
                        <div class="stat-number" id="profileAccuracy">0%</div>
                        <div class="stat-label">Precisión</div>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3><i class="fas fa-paw"></i> Mi Mascota</h3>
                <div class="mascot-preview">
                    <div class="mascot-3d" id="mascot3d">
                        <div class="bear-3d">
                            <div class="bear-head" id="bearHead">
                                <div class="bear-ears">
                                    <div class="bear-ear left" id="bearEarLeft"></div>
                                    <div class="bear-ear right" id="bearEarRight"></div>
                                </div>
                                <div class="bear-face">
                                    <div class="bear-eyes">
                                        <div class="bear-eye left" id="bearEyeLeft">
                                            <div class="pupil"></div>
                                        </div>
                                        <div class="bear-eye right" id="bearEyeRight">
                                            <div class="pupil"></div>
                                        </div>
                                    </div>
                                    <div class="bear-nose" id="bearNose"></div>
                                    <div class="bear-mouth" id="bearMouth"></div>
                                </div>
                            </div>
                            <div class="bear-body" id="bearBody">
                                <div class="bear-arms">
                                    <div class="bear-arm left"></div>
                                    <div class="bear-arm right"></div>
                                </div>
                                <div class="bear-belly" id="bearBelly"></div>
                            </div>
                        </div>
                    </div>
                    <button class="customize-btn" onclick="showMascotCustomization()" id="customizeButton">
                        <i class="fas fa-paint-brush"></i>
                        Personalizar Avatar
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Barra de Navegación Inferior -->
        <div class="bottom-nav">
            <button class="nav-item" onclick="showHome()">
                <i class="fas fa-home"></i>
                <span>Inicio</span>
            </button>
            <button class="nav-item" onclick="showLeaderboard()">
                <i class="fas fa-trophy"></i>
                <span>Ranking</span>
            </button>
            <button class="nav-item" onclick="showShop()">
                <i class="fas fa-store"></i>
                <span>Tienda</span>
            </button>
            <button class="nav-item active" onclick="showProfile()">
                <i class="fas fa-user"></i>
                <span>Perfil</span>
            </button>
            <button class="nav-item" onclick="showSettings()">
                <i class="fas fa-cog"></i>
                <span>Ajustes</span>
            </button>
        </div>
    </div>

    <!-- Pantalla de Personalización de Avatar -->
    <div id="mascotCustomizationScreen" class="screen">
        <div class="customization-fullscreen-container">
            <!-- Sección de Preview -->
            <div class="mascot-preview-section">
                <div class="background-preview" id="backgroundPreview"></div>
                <div class="preview-header">
                    <button class="back-btn" onclick="showProfile()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="preview-title">Personalizar</h2>
                    <button class="ok-btn-modern" onclick="saveMascotCustomization()">
                        OK
                    </button>
                </div>
                
                <div class="mascot-display-large">
                    <div class="mascot-3d">
                        <div class="bear-3d" id="bearPreview">
                            <div class="bear-head" id="previewBearHead">
                                <div class="bear-ears">
                                    <div class="bear-ear left" id="previewBearEarLeft"></div>
                                    <div class="bear-ear right" id="previewBearEarRight"></div>
                                </div>
                                <div class="bear-face">
                                    <div class="bear-eyes">
                                        <div class="bear-eye left" id="previewBearEyeLeft">
                                            <div class="pupil"></div>
                                        </div>
                                        <div class="bear-eye right" id="previewBearEyeRight">
                                            <div class="pupil"></div>
                                        </div>
                                    </div>
                                    <div class="bear-nose" id="previewBearNose"></div>
                                    <div class="bear-mouth" id="previewBearMouth"></div>
                                </div>
                            </div>
                            <div class="bear-body" id="previewBearBody">
                                <div class="bear-arms">
                                    <div class="bear-arm left"></div>
                                    <div class="bear-arm right"></div>
                                </div>
                                <div class="bear-belly" id="previewBearBelly"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controles de Personalización -->
            <div class="customization-controls">
                <div class="controls-header">
                    <div class="drag-handle"></div>
                    <h3 class="controls-title">Personalización</h3>
                </div>

                <div class="customization-tabs-modern">
                    <button class="tab-modern active" onclick="switchTab('pelaje')">
                        Pelaje
                    </button>
                    <button class="tab-modern" onclick="switchTab('ojos')">
                        Ojos
                    </button>
                    <button class="tab-modern" onclick="switchTab('boca')">
                        Boca
                    </button>
                    <button class="tab-modern" onclick="switchTab('nariz')">
                        Nariz
                    </button>
                    <button class="tab-modern" onclick="switchTab('accesorios')">
                        Extras
                    </button>
                    <button class="tab-modern" onclick="switchTab('fondos')">
                        Fondos
                    </button>
                </div>

                <div class="customization-content">
                    <!-- Panel Pelaje -->
                    <div class="customization-panel-modern active" id="pelajePanel">
                        <div class="panel-section">
                            <h4 class="section-title">Color del Pelaje</h4>
                            <div class="options-grid-modern">
                                <div class="option-card" onclick="changeBodyColor('#8B4513')" data-color="#8B4513">
                                    <div class="color-preview" style="background: #8B4513;"></div>
                                    <div class="option-label">Café</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#A0522D')" data-color="#A0522D">
                                    <div class="color-preview" style="background: #A0522D;"></div>
                                    <div class="option-label">Canela</div>
                                </div>
                                <div class="option-card selected" onclick="changeBodyColor('#D2691E')" data-color="#D2691E">
                                    <div class="color-preview" style="background: #D2691E;"></div>
                                    <div class="option-label">Miel</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#F4A460')" data-color="#F4A460">
                                    <div class="color-preview" style="background: #F4A460;"></div>
                                    <div class="option-label">Arena</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#696969')" data-color="#696969">
                                    <div class="color-preview" style="background: #696969;"></div>
                                    <div class="option-label">Gris</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#2F4F4F')" data-color="#2F4F4F">
                                    <div class="color-preview" style="background: #2F4F4F;"></div>
                                    <div class="option-label">Oscuro</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#483D8B')" data-color="#483D8B">
                                    <div class="color-preview" style="background: #483D8B;"></div>
                                    <div class="option-label">Púrpura</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#228B22')" data-color="#228B22">
                                    <div class="color-preview" style="background: #228B22;"></div>
                                    <div class="option-label">Verde</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Ojos -->
                    <div class="customization-panel-modern" id="ojosPanel">
                        <div class="panel-section">
                            <h4 class="section-title">Estilo de Ojos</h4>
                            <div class="options-grid-modern">
                                <div class="option-card selected" onclick="changeEyeStyle('normal')">
                                    <div class="option-preview">👁️</div>
                                    <div class="option-label">Normal</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('large')">
                                    <div class="option-preview">👀</div>
                                    <div class="option-label">Grandes</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('sleepy')">
                                    <div class="option-preview">😴</div>
                                    <div class="option-label">Somnoliento</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('happy')">
                                    <div class="option-preview">😊</div>
                                    <div class="option-label">Feliz</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('star')">
                                    <div class="option-preview">⭐</div>
                                    <div class="option-label">Estrella</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('heart')">
                                    <div class="option-preview">💖</div>
                                    <div class="option-label">Corazón</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('rainbow')">
                                    <div class="option-preview">🌈</div>
                                    <div class="option-label">Arcoíris</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('cool')">
                                    <div class="option-preview">😎</div>
                                    <div class="option-label">Genial</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Boca -->
                    <div class="customization-panel-modern" id="bocaPanel">
                        <div class="panel-section">
                            <h4 class="section-title">Expresión</h4>
                            <div class="options-grid-modern">
                                <div class="option-card selected" onclick="changeMouthStyle('happy')">
                                    <div class="option-preview">😊</div>
                                    <div class="option-label">Feliz</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('neutral')">
                                    <div class="option-preview">😐</div>
                                    <div class="option-label">Neutral</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('surprised')">
                                    <div class="option-preview">😮</div>
                                    <div class="option-label">Sorprendido</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('playful')">
                                    <div class="option-preview">😜</div>
                                    <div class="option-label">Juguetón</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('laugh')">
                                    <div class="option-preview">😄</div>
                                    <div class="option-label">Risueño</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('cute')">
                                    <div class="option-preview">😘</div>
                                    <div class="option-label">Adorable</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Nariz -->
                    <div class="customization-panel-modern" id="narizPanel">
                        <div class="panel-section">
                            <h4 class="section-title">Tipo de Nariz</h4>
                            <div class="options-grid-modern">
                                <div class="option-card selected" onclick="changeNoseStyle('normal')">
                                    <div class="option-preview">👃</div>
                                    <div class="option-label">Normal</div>
                                </div>
                                <div class="option-card" onclick="changeNoseStyle('small')">
                                    <div class="option-preview">👶</div>
                                    <div class="option-label">Pequeña</div>
                                </div>
                                <div class="option-card" onclick="changeNoseStyle('big')">
                                    <div class="option-preview">🔴</div>
                                    <div class="option-label">Grande</div>
                                </div>
                                <div class="option-card" onclick="changeNoseStyle('button')">
                                    <div class="option-preview">⚪</div>
                                    <div class="option-label">Botón</div>
                                </div>
                                <div class="option-card" onclick="changeNoseStyle('heart')">
                                    <div class="option-preview">💗</div>
                                    <div class="option-label">Corazón</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Accesorios -->
                    <div class="customization-panel-modern" id="accesoriosPanel">
                        <div class="panel-section">
                            <h4 class="section-title">Accesorios</h4>
                            <div class="options-grid-modern">
                                <div class="option-card" onclick="toggleAccessory('hat')">
                                    <div class="option-preview">🎩</div>
                                    <div class="option-label">Sombrero</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('glasses')">
                                    <div class="option-preview">👓</div>
                                    <div class="option-label">Lentes</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('cap')">
                                    <div class="option-preview">🧢</div>
                                    <div class="option-label">Gorra</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('headband')">
                                    <div class="option-preview">👑</div>
                                    <div class="option-label">Diadema</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('earrings')">
                                    <div class="option-preview">💎</div>
                                    <div class="option-label">Aretes</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('bowtie')">
                                    <div class="option-preview">🎀</div>
                                    <div class="option-label">Corbatín</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('chain')">
                                    <div class="option-preview">📿</div>
                                    <div class="option-label">Cadena</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('scarf')">
                                    <div class="option-preview">🧣</div>
                                    <div class="option-label">Bufanda</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Fondos -->
                    <div class="customization-panel-modern" id="fondosPanel">
                        <div class="panel-section">
                            <h4 class="section-title">Fondos</h4>
                            <div class="options-grid-modern">
                                <div class="option-card selected" onclick="changeBackground('none')">
                                    <div class="background-preview-option" style="background: linear-gradient(135deg, #58cc02 0%, #89e219 100%);"></div>
                                    <div class="option-label">Por defecto</div>
                                </div>
                                <div class="option-card" onclick="changeBackground('forest')">
                                    <div class="background-preview-option" style="background: linear-gradient(135deg, #2d5016 0%, #3e7b20 100%);"></div>
                                    <div class="option-label">Bosque</div>
                                </div>
                                <div class="option-card" onclick="changeBackground('ocean')">
                                    <div class="background-preview-option" style="background: linear-gradient(135deg, #006994 0%, #0077be 100%);"></div>
                                    <div class="option-label">Océano</div>
                                </div>
                                <div class="option-card" onclick="changeBackground('desert')">
                                    <div class="background-preview-option" style="background: linear-gradient(135deg, #daa520 0%, #f4a460 100%);"></div>
                                    <div class="option-label">Desierto</div>
                                </div>
                                <div class="option-card" onclick="changeBackground('mountain')">
                                    <div class="background-preview-option" style="background: linear-gradient(135deg, #708090 0%, #a9a9a9 100%);"></div>
                                    <div class="option-label">Montaña</div>
                                </div>
                                <div class="option-card" onclick="changeBackground('space')">
                                    <div class="background-preview-option" style="background: linear-gradient(135deg, #191970 0%, #4b0082 100%);"></div>
                                    <div class="option-label">Espacio</div>
                                </div>
                                <div class="option-card" onclick="changeBackground('sunset')">
                                    <div class="background-preview-option" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);"></div>
                                    <div class="option-label">Atardecer</div>
                                </div>
                                <div class="option-card" onclick="changeBackground('winter')">
                                    <div class="background-preview-option" style="background: linear-gradient(135deg, #b0e0e6 0%, #ffffff 100%);"></div>
                                    <div class="option-label">Invierno</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pantalla de Configuraciones -->
    <div id="settingsScreen" class="screen">
        <div class="header">
            <button class="back-btn" onclick="showHome()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h2>Configuraciones</h2>
        </div>

        <div class="settings-container">
            <div class="settings-section">
                <h3><i class="fas fa-language"></i> Idioma</h3>
                <div class="setting-item">
                    <label>Idioma de la aplicación:</label>
                    <select id="languageSelect" onchange="changeLanguage()">
                        <option value="es">Español</option>
                        <option value="en">English</option>
                        <option value="fr">Français</option>
                        <option value="pt">Português</option>
                    </select>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-volume-up"></i> Audio</h3>
                <div class="setting-item">
                    <label>Efectos de sonido:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="soundEffects" checked onchange="toggleSoundEffects()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Música de fondo:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="backgroundMusic" onchange="toggleBackgroundMusic()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Volumen:</label>
                    <input type="range" id="volumeSlider" min="0" max="100" value="50" onchange="changeVolume()">
                    <span id="volumeValue">50%</span>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-gamepad"></i> Juego</h3>
                <div class="setting-item">
                    <label>Dificultad automática:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="adaptiveDifficulty" checked onchange="toggleAdaptiveDifficulty()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Recordatorios diarios:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="dailyReminders" onchange="toggleDailyReminders()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Vibración en móvil:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="vibration" onchange="toggleVibration()">
                        <span class="slider"></span>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-shield-alt"></i> Privacidad</h3>
                <div class="setting-item">
                    <label>Compartir progreso:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="shareProgress" onchange="toggleShareProgress()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Análisis de errores:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="errorAnalysis" checked onchange="toggleErrorAnalysis()">
                        <span class="slider"></span>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-info-circle"></i> Información</h3>
                <div class="setting-item">
                    <button class="info-btn" onclick="showAbout()">
                        <i class="fas fa-info"></i>
                        Acerca de BeMaa
                    </button>
                </div>
                <div class="setting-item">
                    <button class="info-btn" onclick="showHelp()">
                        <i class="fas fa-question-circle"></i>
                        Ayuda y Soporte
                    </button>
                </div>
                <div class="setting-item">
                    <button class="info-btn" onclick="showPrivacyPolicy()">
                        <i class="fas fa-file-contract"></i>
                        Política de Privacidad
                    </button>
                </div>
            </div>

            <div class="settings-section danger-zone">
                <h3><i class="fas fa-exclamation-triangle"></i> Zona Peligrosa</h3>
                <div class="setting-item">
                    <button class="danger-btn" onclick="resetProgress()">
                        <i class="fas fa-undo"></i>
                        Reiniciar Progreso
                    </button>
                </div>
                <div class="setting-item">
                    <button class="danger-btn" onclick="deleteAccount()">
                        <i class="fas fa-trash"></i>
                        Eliminar Cuenta
                    </button>
                </div>
                <div class="setting-item">
                    <button class="logout-btn-settings" onclick="logoutUser()">
                        <i class="fas fa-sign-out-alt"></i>
                        Cerrar Sesión
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Barra de Navegación Inferior -->
        <div class="bottom-nav">
            <button class="nav-item" onclick="showHome()">
                <i class="fas fa-home"></i>
                <span>Inicio</span>
            </button>
            <button class="nav-item" onclick="showLeaderboard()">
                <i class="fas fa-trophy"></i>
                <span>Ranking</span>
            </button>
            <button class="nav-item" onclick="showShop()">
                <i class="fas fa-store"></i>
                <span>Tienda</span>
            </button>
            <button class="nav-item" onclick="showProfile()">
                <i class="fas fa-user"></i>
                <span>Perfil</span>
            </button>
            <button class="nav-item active" onclick="showSettings()">
                <i class="fas fa-cog"></i>
                <span>Ajustes</span>
            </button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

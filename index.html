<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeMaa - Aprende Matemáticas</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Pantalla de Intro -->
    <div id="introScreen" class="screen active">
        <div class="intro-container">
            <div class="intro-stage">
                <div class="bear-character" id="introBear">
                    <div class="bear-eyes"></div>
                    <div class="bear-nose"></div>
                    <div class="bear-mouth"></div>
                </div>
                <div class="lightning-bolt" id="lightningBolt"></div>
                <div class="intro-logo" id="introLogo">
                    <div class="logo-text">BeMaa</div>
                    <div class="logo-subtitle">Matemáticas Divertidas</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pantalla de Autenticación -->
    <div id="authScreen" class="screen">
        <div class="auth-container">
            <div class="auth-logo">
                <div class="mascot-face auth-mascot">🐻</div>
                <h1>BeMaa</h1>
                <p>Tu compañero matemático</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Iniciar Sesión</button>
                <button class="auth-tab" onclick="switchAuthTab('register')">Registrarse</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <div class="form-group">
                    <input type="email" id="loginEmail" placeholder="Correo electrónico" required>
                    <i class="fas fa-envelope form-icon"></i>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" placeholder="Contraseña" required>
                    <i class="fas fa-lock form-icon"></i>
                </div>
                <button class="auth-btn" onclick="loginUser()">
                    <i class="fas fa-sign-in-alt"></i>
                    Iniciar Sesión
                </button>
                <div class="auth-options">
                    <button class="google-btn" onclick="loginWithGoogle()">
                        <i class="fab fa-google"></i>
                        Continuar con Google
                    </button>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="auth-form">
                <div class="form-group">
                    <input type="text" id="registerName" placeholder="Nombre completo" required>
                    <i class="fas fa-user form-icon"></i>
                </div>
                <div class="form-group">
                    <input type="email" id="registerEmail" placeholder="Correo electrónico" required>
                    <i class="fas fa-envelope form-icon"></i>
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" placeholder="Contraseña (mín. 6 caracteres)" required>
                    <i class="fas fa-lock form-icon"></i>
                </div>
                <div class="form-group">
                    <input type="password" id="confirmPassword" placeholder="Confirmar contraseña" required>
                    <i class="fas fa-lock form-icon"></i>
                </div>
                <div class="age-selector">
                    <label>Edad:</label>
                    <select id="userAge">
                        <option value="">Selecciona tu edad</option>
                        <option value="kid">6-12 años</option>
                        <option value="teen">13-17 años</option>
                        <option value="adult">18+ años</option>
                    </select>
                </div>
                <button class="auth-btn" onclick="registerUser()">
                    <i class="fas fa-user-plus"></i>
                    Crear Cuenta
                </button>
                <div class="auth-options">
                    <button class="google-btn" onclick="loginWithGoogle()">
                        <i class="fab fa-google"></i>
                        Registrarse con Google
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pantalla de inicio -->
    <div id="homeScreen" class="screen">
        <div class="header-duolingo">
            <div class="streak-indicator">
                <i class="fas fa-fire streak-icon"></i>
                <span class="streak-count" id="streak">0</span>
            </div>
            <div class="gems-indicator">
                <i class="fas fa-gem gems-icon"></i>
                <span class="gems-count" id="gems">100</span>
            </div>
        </div>

        <div class="mascot-container">
            <div class="mascot" id="mascot">
                <div class="mascot-3d mascot-3d-inline" id="mascot3dHome">
                    <div class="bear-3d" id="bearHome">
                        <div class="bear-head">
                            <div class="bear-ears">
                                <div class="bear-ear left"></div>
                                <div class="bear-ear right"></div>
                            </div>
                            <div class="bear-face">
                                <div class="bear-eyes">
                                    <div class="bear-eye left">
                                        <div class="pupil"></div>
                                    </div>
                                    <div class="bear-eye right">
                                        <div class="pupil"></div>
                                    </div>
                                </div>
                                <div class="bear-nose"></div>
                                <div class="bear-mouth" id="bearMouthHome"></div>
                            </div>
                        </div>
                        <div class="bear-body">
                            <div class="bear-arms">
                                <div class="bear-arm left"></div>
                                <div class="bear-arm right"></div>
                            </div>
                            <div class="bear-belly"></div>
                        </div>
                    </div>
                </div>
                <div class="mascot-speech" id="mascotSpeech">¡Hola! Soy BeMaa, ¿listo para una aventura matemática?</div>
            </div>
        </div>

        <div class="lessons-grid" id="lessonsGrid">
            <!-- Lecciones generadas dinámicamente -->
        </div>
    </div>

    <!-- Pantalla de lecciones -->
    <div id="lessonsScreen" class="screen">
        <div class="header">
            <button class="back-btn" onclick="showHome()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h2>Selecciona un tema</h2>
        </div>

        <div class="mascot-container">
            <div class="mascot" id="mascotLessons">
                <div class="mascot-3d mascot-3d-inline">
                    <div class="bear-3d" id="bearLessons">
                        <div class="bear-head">
                            <div class="bear-ears">
                                <div class="bear-ear left"></div>
                                <div class="bear-ear right"></div>
                            </div>
                            <div class="bear-face">
                                <div class="bear-eyes">
                                    <div class="bear-eye left">
                                        <div class="pupil"></div>
                                    </div>
                                    <div class="bear-eye right">
                                        <div class="pupil"></div>
                                    </div>
                                </div>
                                <div class="bear-nose"></div>
                                <div class="bear-mouth" id="bearMouthLessons"></div>
                            </div>
                        </div>
                        <div class="bear-body">
                            <div class="bear-arms">
                                <div class="bear-arm left"></div>
                                <div class="bear-arm right"></div>
                            </div>
                            <div class="bear-belly"></div>
                        </div>
                    </div>
                </div>
                <div class="mascot-speech" id="mascotSpeechLessons">¿Qué tema quieres practicar hoy?</div>
            </div>
        </div>

        <div class="lessons-grid" id="lessonsGrid">
            <!-- Lecciones generadas dinámicamente -->
        </div>

        <div class="game-modes">
            <h3>Modos de juego</h3>
            <button class="mode-btn" onclick="startMode('normal')">
                <i class="fas fa-graduation-cap"></i>
                Modo Normal
            </button>
            <button class="mode-btn" onclick="startMode('challenge')">
                <i class="fas fa-stopwatch"></i>
                Modo Desafío
            </button>
            <button class="mode-btn" onclick="startMode('survival')">
                <i class="fas fa-heart-broken"></i>
                Modo Supervivencia
            </button>
        </div>
    </div>

    <!-- Pantalla de juego -->
    <div id="gameScreen" class="screen">
        <div class="game-header">
            <button class="back-btn" onclick="showLessons()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="lives-display">
                <span id="livesCount">5</span>
                <i class="fas fa-heart"></i>
            </div>
        </div>

        <div class="mascot-container">
            <div class="mascot" id="mascotGame">
                <div class="mascot-3d mascot-3d-inline">
                    <div class="bear-3d" id="bearGame">
                        <div class="bear-head">
                            <div class="bear-ears">
                                <div class="bear-ear left"></div>
                                <div class="bear-ear right"></div>
                            </div>
                            <div class="bear-face">
                                <div class="bear-eyes">
                                    <div class="bear-eye left">
                                        <div class="pupil"></div>
                                    </div>
                                    <div class="bear-eye right">
                                        <div class="pupil"></div>
                                    </div>
                                </div>
                                <div class="bear-nose"></div>
                                <div class="bear-mouth" id="bearMouthGame"></div>
                            </div>
                        </div>
                        <div class="bear-body">
                            <div class="bear-arms">
                                <div class="bear-arm left"></div>
                                <div class="bear-arm right"></div>
                            </div>
                            <div class="bear-belly"></div>
                        </div>
                    </div>
                </div>
                <div class="mascot-speech" id="mascotSpeechGame">¡Vamos a resolver este problema!</div>
            </div>
        </div>

        <div class="question-container">
            <div class="question-number">Pregunta <span id="questionNum">1</span> de <span id="totalQuestions">10</span></div>
            <div class="question-text" id="questionText"></div>
            <div class="question-image" id="questionImage"></div>
        </div>

        <div class="answers-container" id="answersContainer">
            <!-- Respuestas generadas dinámicamente -->
        </div>

        <div class="game-controls">
            <button class="help-btn" onclick="showCalculator()">
                <i class="fas fa-calculator"></i>
                Calculadora
            </button>
            <button class="hint-btn" onclick="showHint()">
                <i class="fas fa-lightbulb"></i>
                Pista
            </button>
            <button class="explain-btn" onclick="showExplanation()">
                <i class="fas fa-question-circle"></i>
                Explicar
            </button>
        </div>
    </div>

    <!-- Calculadora Virtual -->
    <div id="calculatorModal" class="modal">
        <div class="modal-content calculator">
            <div class="modal-header">
                <h3>Calculadora Virtual</h3>
                <button class="close-btn" onclick="closeCalculator()">&times;</button>
            </div>
            <div class="calculator-display" id="calcDisplay">0</div>
            <div class="calculator-buttons">
                <button onclick="clearCalc()">C</button>
                <button onclick="calcOperation('/')">/</button>
                <button onclick="calcOperation('*')">×</button>
                <button onclick="calcDelete()">←</button>
                <button onclick="calcNumber(7)">7</button>
                <button onclick="calcNumber(8)">8</button>
                <button onclick="calcNumber(9)">9</button>
                <button onclick="calcOperation('-')">-</button>
                <button onclick="calcNumber(4)">4</button>
                <button onclick="calcNumber(5)">5</button>
                <button onclick="calcNumber(6)">6</button>
                <button onclick="calcOperation('+')">+</button>
                <button onclick="calcNumber(1)">1</button>
                <button onclick="calcNumber(2)">2</button>
                <button onclick="calcNumber(3)">3</button>
                <button onclick="calcEquals()" class="calc-equals" rowspan="2">=</button>
                <button onclick="calcNumber(0)" class="calc-zero">0</button>
                <button onclick="calcDecimal()">.</button>
            </div>
            <div class="calc-steps" id="calcSteps">
                <h4>Pasos de la operación:</h4>
                <div id="stepsList"></div>
            </div>
        </div>
    </div>

    <!-- Pantalla de resultados -->
    <div id="resultsScreen" class="screen">
        <div class="results-container">
            <div class="mascot celebration" id="resultMascot">🐻</div>
            <h2 id="resultTitle">¡Excelente trabajo!</h2>
            <div class="score-display">
                <div class="score-item">
                    <span class="score-label">Puntuación:</span>
                    <span class="score-value" id="finalScore">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">Precisión:</span>
                    <span class="score-value" id="accuracy">0%</span>
                </div>
                <div class="score-item">
                    <span class="score-label">Gemas ganadas:</span>
                    <span class="score-value" id="gemsEarned">0</span>
                </div>
            </div>

            <div class="achievements" id="achievements">
                <!-- Logros ganados -->
            </div>

            <div class="result-actions">
                <button class="action-btn" onclick="showLessons()">
                    <i class="fas fa-repeat"></i>
                    Repetir
                </button>
                <button class="action-btn" onclick="showHome()">
                    <i class="fas fa-home"></i>
                    Inicio
                </button>
            </div>
        </div>
    </div>

    <!-- Pantalla de Perfil -->
    <div id="profileScreen" class="screen">
        <div class="profile-container">
            <div class="profile-header">
                <button class="profile-back-btn" onclick="showHome()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="profile-avatar-section">
                    <div class="mascot-3d" id="mascot3d">
                        <div class="bear-3d">
                            <div class="bear-head" id="bearHead">
                                <div class="bear-ears">
                                    <div class="bear-ear left" id="bearEarLeft"></div>
                                    <div class="bear-ear right" id="bearEarRight"></div>
                                </div>
                                <div class="bear-face">
                                    <div class="bear-eyes">
                                        <div class="bear-eye left" id="bearEyeLeft">
                                            <div class="pupil"></div>
                                        </div>
                                        <div class="bear-eye right" id="bearEyeRight">
                                            <div class="pupil"></div>
                                        </div>
                                    </div>
                                    <div class="bear-nose" id="bearNose"></div>
                                    <div class="bear-mouth" id="bearMouth"></div>
                                </div>
                            </div>
                            <div class="bear-body" id="bearBody">
                                <div class="bear-arms">
                                    <div class="bear-arm left"></div>
                                    <div class="bear-arm right"></div>
                                </div>
                                <div class="bear-belly" id="bearBelly"></div>
                            </div>
                        </div>
                    </div>
                    <button class="customize-avatar-btn" onclick="showMascotCustomization()">
                        <i class="fas fa-paint-brush"></i>
                        Personalizar Avatar
                    </button>
                </div>
                <div class="profile-name" id="profileNameDisplay">Usuario</div>
                <div class="profile-level">Nivel <span id="profileLevelDisplay">1</span></div>
            </div>

            <div class="profile-content">
                <div class="profile-tabs">
                    <button class="profile-tab active" onclick="switchProfileTab('stats')">Estadísticas</button>
                    <button class="profile-tab" onclick="switchProfileTab('info')">Información</button>
                    <button class="profile-tab" onclick="switchProfileTab('achievements')">Logros</button>
                    <button class="profile-tab" onclick="switchProfileTab('settings')">Ajustes</button>
                </div>

                <!-- Tab Estadísticas -->
                <div class="profile-tab-content active" id="statsTab">
                    <div class="stats-grid-full">
                        <div class="stat-card-full">
                            <div class="stat-icon-full">🔥</div>
                            <div class="stat-number-full" id="profileStreak">0</div>
                            <div class="stat-label-full">Racha</div>
                        </div>
                        <div class="stat-card-full">
                            <div class="stat-icon-full">💎</div>
                            <div class="stat-number-full" id="profileGems">0</div>
                            <div class="stat-label-full">Gemas</div>
                        </div>
                        <div class="stat-card-full">
                            <div class="stat-icon-full">🏆</div>
                            <div class="stat-number-full" id="profileLevel">1</div>
                            <div class="stat-label-full">Nivel</div>
                        </div>
                        <div class="stat-card-full">
                            <div class="stat-icon-full">✅</div>
                            <div class="stat-number-full" id="profileAccuracy">0%</div>
                            <div class="stat-label-full">Precisión</div>
                        </div>
                    </div>
                </div>

                <!-- Tab Información -->
                <div class="profile-tab-content" id="infoTab">
                    <div class="info-section">
                        <h4>Información Personal</h4>
                        <div class="info-item-full">
                            <span class="info-label-full">Nombre:</span>
                            <span class="info-value-full" id="profileName">Usuario</span>
                        </div>
                        <div class="info-item-full">
                            <span class="info-label-full">Correo:</span>
                            <span class="info-value-full" id="profileEmail">email@ejemplo.com</span>
                        </div>
                        <div class="info-item-full">
                            <span class="info-label-full">Edad:</span>
                            <span class="info-value-full" id="profileAge">6-12 años</span>
                        </div>
                        <button class="edit-profile-btn" onclick="editProfile()">
                            <i class="fas fa-edit"></i>
                            Editar Información
                        </button>
                    </div>
                </div>

                <!-- Tab Logros -->
                <div class="profile-tab-content" id="achievementsTab">
                    <div class="achievements-grid" id="achievementsGrid">
                        <!-- Logros generados dinámicamente -->
                    </div>
                </div>

                <!-- Tab Configuraciones -->
                <div class="profile-tab-content" id="settingsTab">
                    <div class="settings-list">
                        <div class="settings-item-full" onclick="showSettings()">
                            <div class="settings-item-left">
                                <i class="fas fa-cog settings-item-icon"></i>
                                <span class="settings-item-text">Configuraciones</span>
                            </div>
                            <i class="fas fa-chevron-right settings-item-arrow"></i>
                        </div>
                        <div class="settings-item-full" onclick="showHelp()">
                            <div class="settings-item-left">
                                <i class="fas fa-question-circle settings-item-icon"></i>
                                <span class="settings-item-text">Ayuda</span>
                            </div>
                            <i class="fas fa-chevron-right settings-item-arrow"></i>
                        </div>
                        <div class="settings-item-full" onclick="showAbout()">
                            <div class="settings-item-left">
                                <i class="fas fa-info-circle settings-item-icon"></i>
                                <span class="settings-item-text">Acerca de</span>
                            </div>
                            <i class="fas fa-chevron-right settings-item-arrow"></i>
                        </div>
                        <div class="settings-item-full" onclick="logoutUser()">
                            <div class="settings-item-left">
                                <i class="fas fa-sign-out-alt settings-item-icon"></i>
                                <span class="settings-item-text">Cerrar Sesión</span>
                            </div>
                            <i class="fas fa-chevron-right settings-item-arrow"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pantalla de Personalización de Avatar -->
    <div id="mascotCustomizationScreen" class="screen">
        <div class="customization-fullscreen-container">
            <!-- Sección de Preview -->
            <div class="mascot-preview-section">
                <div class="preview-header">
                    <h2 class="preview-title">Tu Avatar</h2>
                    <button class="close-btn-modern" onclick="showProfile()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="mascot-display-large">
                    <div class="mascot-3d">
                        <div class="bear-3d" id="bearPreview">
                            <div class="bear-head" id="previewBearHead">
                                <div class="bear-ears">
                                    <div class="bear-ear left" id="previewBearEarLeft"></div>
                                    <div class="bear-ear right" id="previewBearEarRight"></div>
                                </div>
                                <div class="bear-face">
                                    <div class="bear-eyes">
                                        <div class="bear-eye left" id="previewBearEyeLeft">
                                            <div class="pupil"></div>
                                        </div>
                                        <div class="bear-eye right" id="previewBearEyeRight">
                                            <div class="pupil"></div>
                                        </div>
                                    </div>
                                    <div class="bear-nose" id="previewBearNose"></div>
                                    <div class="bear-mouth" id="previewBearMouth"></div>
                                </div>
                            </div>
                            <div class="bear-body" id="previewBearBody">
                                <div class="bear-arms">
                                    <div class="bear-arm left"></div>
                                    <div class="bear-arm right"></div>
                                </div>
                                <div class="bear-belly" id="previewBearBelly"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controles de Personalización -->
            <div class="customization-controls">
                <div class="controls-header">
                    <h3 class="controls-title">Personalización</h3>
                </div>

                <div class="customization-tabs-modern">
                    <button class="tab-modern active" onclick="switchTab('pelaje')">
                        <i class="fas fa-palette"></i> Pelaje
                    </button>
                    <button class="tab-modern" onclick="switchTab('ojos')">
                        <i class="fas fa-eye"></i> Ojos
                    </button>
                    <button class="tab-modern" onclick="switchTab('boca')">
                        <i class="fas fa-smile"></i> Boca
                    </button>
                    <button class="tab-modern" onclick="switchTab('nariz')">
                        <i class="fas fa-baby"></i> Nariz
                    </button>
                    <button class="tab-modern" onclick="switchTab('accesorios')">
                        <i class="fas fa-hat-wizard"></i> Accesorios
                    </button>
                </div>

                <div class="customization-content">
                    <!-- Panel Pelaje -->
                    <div class="customization-panel-modern active" id="pelajePanel">
                        <div class="panel-section">
                            <h4 class="section-title">
                                <i class="fas fa-palette"></i> Color del Pelaje
                            </h4>
                            <div class="options-grid-modern">
                                <div class="option-card" onclick="changeBodyColor('#8B4513')" data-color="#8B4513">
                                    <div class="color-preview" style="background: #8B4513;"></div>
                                    <div class="option-label">Café</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#A0522D')" data-color="#A0522D">
                                    <div class="color-preview" style="background: #A0522D;"></div>
                                    <div class="option-label">Canela</div>
                                </div>
                                <div class="option-card selected" onclick="changeBodyColor('#D2691E')" data-color="#D2691E">
                                    <div class="color-preview" style="background: #D2691E;"></div>
                                    <div class="option-label">Miel</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#F4A460')" data-color="#F4A460">
                                    <div class="color-preview" style="background: #F4A460;"></div>
                                    <div class="option-label">Arena</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#696969')" data-color="#696969">
                                    <div class="color-preview" style="background: #696969;"></div>
                                    <div class="option-label">Gris</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#2F4F4F')" data-color="#2F4F4F">
                                    <div class="color-preview" style="background: #2F4F4F;"></div>
                                    <div class="option-label">Oscuro</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#483D8B')" data-color="#483D8B">
                                    <div class="color-preview" style="background: #483D8B;"></div>
                                    <div class="option-label">Púrpura</div>
                                </div>
                                <div class="option-card" onclick="changeBodyColor('#228B22')" data-color="#228B22">
                                    <div class="color-preview" style="background: #228B22;"></div>
                                    <div class="option-label">Verde</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Ojos -->
                    <div class="customization-panel-modern" id="ojosPanel">
                        <div class="panel-section">
                            <h4 class="section-title">
                                <i class="fas fa-eye"></i> Estilo de Ojos
                            </h4>
                            <div class="options-grid-modern">
                                <div class="option-card selected" onclick="changeEyeStyle('normal')">
                                    <div class="option-preview">👁️</div>
                                    <div class="option-label">Normal</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('large')">
                                    <div class="option-preview">👀</div>
                                    <div class="option-label">Grandes</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('sleepy')">
                                    <div class="option-preview">😴</div>
                                    <div class="option-label">Somnoliento</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('happy')">
                                    <div class="option-preview">😊</div>
                                    <div class="option-label">Feliz</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('star')">
                                    <div class="option-preview">⭐</div>
                                    <div class="option-label">Estrella</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('heart')">
                                    <div class="option-preview">💖</div>
                                    <div class="option-label">Corazón</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('rainbow')">
                                    <div class="option-preview">🌈</div>
                                    <div class="option-label">Arcoíris</div>
                                </div>
                                <div class="option-card" onclick="changeEyeStyle('cool')">
                                    <div class="option-preview">😎</div>
                                    <div class="option-label">Genial</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Boca -->
                    <div class="customization-panel-modern" id="bocaPanel">
                        <div class="panel-section">
                            <h4 class="section-title">
                                <i class="fas fa-smile"></i> Expresión
                            </h4>
                            <div class="options-grid-modern">
                                <div class="option-card selected" onclick="changeMouthStyle('happy')">
                                    <div class="option-preview">😊</div>
                                    <div class="option-label">Feliz</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('neutral')">
                                    <div class="option-preview">😐</div>
                                    <div class="option-label">Neutral</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('surprised')">
                                    <div class="option-preview">😮</div>
                                    <div class="option-label">Sorprendido</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('playful')">
                                    <div class="option-preview">😜</div>
                                    <div class="option-label">Juguetón</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('laugh')">
                                    <div class="option-preview">😄</div>
                                    <div class="option-label">Risueño</div>
                                </div>
                                <div class="option-card" onclick="changeMouthStyle('cute')">
                                    <div class="option-preview">😘</div>
                                    <div class="option-label">Adorable</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Nariz -->
                    <div class="customization-panel-modern" id="narizPanel">
                        <div class="panel-section">
                            <h4 class="section-title">
                                <i class="fas fa-baby"></i> Tipo de Nariz
                            </h4>
                            <div class="options-grid-modern">
                                <div class="option-card selected" onclick="changeNoseStyle('normal')">
                                    <div class="option-preview">👃</div>
                                    <div class="option-label">Normal</div>
                                </div>
                                <div class="option-card" onclick="changeNoseStyle('small')">
                                    <div class="option-preview">👶</div>
                                    <div class="option-label">Pequeña</div>
                                </div>
                                <div class="option-card" onclick="changeNoseStyle('big')">
                                    <div class="option-preview">🔴</div>
                                    <div class="option-label">Grande</div>
                                </div>
                                <div class="option-card" onclick="changeNoseStyle('button')">
                                    <div class="option-preview">⚪</div>
                                    <div class="option-label">Botón</div>
                                </div>
                                <div class="option-card" onclick="changeNoseStyle('heart')">
                                    <div class="option-preview">💗</div>
                                    <div class="option-label">Corazón</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Accesorios -->
                    <div class="customization-panel-modern" id="accesoriosPanel">
                        <div class="panel-section">
                            <h4 class="section-title">
                                <i class="fas fa-hat-wizard"></i> Accesorios
                            </h4>
                            <div class="options-grid-modern">
                                <div class="option-card" onclick="toggleAccessory('hat')">
                                    <div class="option-preview">🎩</div>
                                    <div class="option-label">Sombrero</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('glasses')">
                                    <div class="option-preview">👓</div>
                                    <div class="option-label">Lentes</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('cap')">
                                    <div class="option-preview">🧢</div>
                                    <div class="option-label">Gorra</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('headband')">
                                    <div class="option-preview">👑</div>
                                    <div class="option-label">Diadema</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('earrings')">
                                    <div class="option-preview">💎</div>
                                    <div class="option-label">Aretes</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('bowtie')">
                                    <div class="option-preview">🎀</div>
                                    <div class="option-label">Corbatín</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('chain')">
                                    <div class="option-preview">📿</div>
                                    <div class="option-label">Cadena</div>
                                </div>
                                <div class="option-card" onclick="toggleAccessory('scarf')">
                                    <div class="option-preview">🧣</div>
                                    <div class="option-label">Bufanda</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="save-actions">
                    <button class="reset-btn" onclick="resetCustomization()">
                        <i class="fas fa-undo"></i> Resetear
                    </button>
                    <button class="save-btn-modern" onclick="saveMascotCustomization()">
                        <i class="fas fa-save"></i> Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pantalla de Configuraciones -->
    <div id="settingsScreen" class="screen">
        <div class="header">
            <button class="back-btn" onclick="showProfile()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h2>Configuraciones</h2>
        </div>

        <div class="settings-container">
            <div class="settings-section">
                <h3><i class="fas fa-language"></i> Idioma</h3>
                <div class="setting-item">
                    <label>Idioma de la aplicación:</label>
                    <select id="languageSelect" onchange="changeLanguage()">
                        <option value="es">Español</option>
                        <option value="en">English</option>
                        <option value="fr">Français</option>
                        <option value="pt">Português</option>
                    </select>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-volume-up"></i> Audio</h3>
                <div class="setting-item">
                    <label>Efectos de sonido:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="soundEffects" checked onchange="toggleSoundEffects()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Música de fondo:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="backgroundMusic" onchange="toggleBackgroundMusic()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Volumen:</label>
                    <input type="range" id="volumeSlider" min="0" max="100" value="50" onchange="changeVolume()">
                    <span id="volumeValue">50%</span>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-gamepad"></i> Juego</h3>
                <div class="setting-item">
                    <label>Dificultad automática:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="adaptiveDifficulty" checked onchange="toggleAdaptiveDifficulty()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Recordatorios diarios:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="dailyReminders" onchange="toggleDailyReminders()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Vibración en móvil:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="vibration" onchange="toggleVibration()">
                        <span class="slider"></span>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-shield-alt"></i> Privacidad</h3>
                <div class="setting-item">
                    <label>Compartir progreso:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="shareProgress" onchange="toggleShareProgress()">
                        <span class="slider"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Análisis de errores:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="errorAnalysis" checked onchange="toggleErrorAnalysis()">
                        <span class="slider"></span>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-info-circle"></i> Información</h3>
                <div class="setting-item">
                    <button class="info-btn" onclick="showAbout()">
                        <i class="fas fa-info"></i>
                        Acerca de BeMaa
                    </button>
                </div>
                <div class="setting-item">
                    <button class="info-btn" onclick="showHelp()">
                        <i class="fas fa-question-circle"></i>
                        Ayuda y Soporte
                    </button>
                </div>
                <div class="setting-item">
                    <button class="info-btn" onclick="showPrivacyPolicy()">
                        <i class="fas fa-file-contract"></i>
                        Política de Privacidad
                    </button>
                </div>
            </div>

            <div class="settings-section danger-zone">
                <h3><i class="fas fa-exclamation-triangle"></i> Zona Peligrosa</h3>
                <div class="setting-item">
                    <button class="danger-btn" onclick="resetProgress()">
                        <i class="fas fa-undo"></i>
                        Reiniciar Progreso
                    </button>
                </div>
                <div class="setting-item">
                    <button class="danger-btn" onclick="deleteAccount()">
                        <i class="fas fa-trash"></i>
                        Eliminar Cuenta
                    </button>
                </div>
                <div class="setting-item">
                    <button class="logout-btn-settings" onclick="logoutUser()">
                        <i class="fas fa-sign-out-alt"></i>
                        Cerrar Sesión
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Navegación Bottom Tab -->
    <div class="bottom-navigation" id="bottomNav">
        <div class="nav-item active" onclick="navigateToHome()">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-label">Inicio</span>
        </div>
        <div class="nav-item" onclick="showShop()">
            <i class="fas fa-store nav-icon"></i>
            <span class="nav-label">Tienda</span>
        </div>
        <div class="nav-item" onclick="toggleProfileMenu()">
            <i class="fas fa-ellipsis-h nav-icon"></i>
            <span class="nav-label">Más</span>
        </div>
    </div>

    <!-- Menú de perfil -->
    <div class="profile-menu" id="profileMenu">
        <div class="profile-menu-content">
            <div class="profile-menu-item" onclick="showProfile()">
                <i class="fas fa-user profile-menu-icon"></i>
                <span class="profile-menu-text">Mi Perfil</span>
            </div>
            <div class="profile-menu-item" onclick="showStats()">
                <i class="fas fa-chart-bar profile-menu-icon"></i>
                <span class="profile-menu-text">Estadísticas</span>
            </div>
            <div class="profile-menu-item" onclick="showSettings()">
                <i class="fas fa-cog profile-menu-icon"></i>
                <span class="profile-menu-text">Configuraciones</span>
            </div>
            <div class="profile-menu-item" onclick="showHelp()">
                <i class="fas fa-question-circle profile-menu-icon"></i>
                <span class="profile-menu-text">Ayuda</span>
            </div>
            <div class="profile-menu-item" onclick="logoutUser()">
                <i class="fas fa-sign-out-alt profile-menu-icon"></i>
                <span class="profile-menu-text">Cerrar Sesión</span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
